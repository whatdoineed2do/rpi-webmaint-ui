<!DOCTYPE html>
<html lang="en">
    <head>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
      <meta name="description" content="">
      <meta name="author" content="">
      <link rel="icon" href="raspicon.ico">

      <!-- Bootstrap core CSS -->
      <link href="bootstrap.min.css" rel="stylesheet">

      <!-- Custom styles for this template -->
      <!-- link href="navbar-static-top.css" rel="stylesheet" -->

      <script src="jquery.min.js"></script>

      <script>
	function  svrinfo() {
	    $("#div_maint").html("");
	    $.ajax({url: "../cgi-bin/svrinfo.sh", success: function(result){
		$("#div_svrinfo").html(result);
	    } });
	}

	$(document).ready(function(){
	    $("#div_maint_cancel_bttns").hide();
	    $("#div_svrinfo").html("initialised: " + new Date($.now()));
	    svrinfo();
	});



	function  shutdown() {
	    $("#div_maint_bttns").fadeOut();
	    $("#div_maint").html("shutting down" + new Date($.now()));
	    $.ajax({url: "../cgi-bin/shutdown.sh", success: function(result){
		$("#div_maint").html(result);
	    } });
	    $("#div_maint_cancel_bttns").fadeIn();
	}

	function  reboot() {
	    $("#div_maint_bttns").fadeOut();
	    $("#div_maint").html(new Date($.now()) + " - rebooting, waiting for svr response");
	    $.ajax({url: "../cgi-bin/reboot.sh", success: function(result){
		$("#div_maint").html(result);
	    }});
	    $("#div_maint_cancel_bttns").fadeIn();
	}

	function  cancel() {
	    $("#div_maint_bttns").fadeIn();
	    $("#div_maint").html("cancelling shutdownn/reboot - may be too late!");
	    $.ajax({url: "../cgi-bin/cancel.sh", success: function(result){
		$("#div_maint").html(result);
	    }});
	    $("#div_maint_cancel_bttns").fadeOut();
	}

	function  motioneye_toggle() {
	    $.ajax({url: "../cgi-bin/motioneye-toggle.sh", success: function(result){
		$("#div_maint").html(result);
	    }});
	}


	function  restartemu() {
	    $.ajax({url: "../cgi-bin/restartemu.sh", success: function(result){
		$("#div_maint").html(result);
	    }});
	}

	function  reboot_dafang1() {
	    $.ajax({url: "../cgi-bin/dafang-reboot1.sh", success: function(result){
		$("#div_maint").html(result);
	    }});
	}

	function  reboot_dafang2() {
	    $.ajax({url: "../cgi-bin/dafang-reboot2.sh", success: function(result){
		$("#div_maint").html(result);
	    }});
	}

	function  reboot_dafang3() {
	    $.ajax({url: "../cgi-bin/dafang-reboot3.sh", success: function(result){
		$("#div_maint").html(result);
	    }});
	}

	function  foo() {
	    $.ajax({url: "../cgi-bin/foo.sh", success: function(result){
		$("#div_maint").html(result);
	    }});
	}


	function  restartkodi() {
	    $.ajax({url: "../cgi-bin/restartkodi.sh", success: function(result){
		$("#div_maint").html(result);
	    }});
	}

	function  restartforked_daapd() {
	    $.ajax({url: "../cgi-bin/restartforked_daapd.sh", success: function(result){
		$("#div_maint").html(result);
	    }});
	}

	function  restartbluetooth() {
	    $.ajax({url: "../cgi-bin/restartbt.sh", success: function(result){
		$("#div_maint").html(result);
	    }});
	}

	function  radio_play() {
	    $.ajax({url: "../cgi-bin/mocp-bbcradio.sh", success: function(result){
		$("#div_maint").html(result);
	    }});
	}

	function  radio_stop() {
	    $.ajax({url: "../cgi-bin/mocp-stop.sh", success: function(result){
		$("#div_maint").html(result);
	    }});
	}

	function  kodi_rescanmusic() {
	    $.ajax({url: "../cgi-bin/kodi-rescanmusic.sh", success: function(result){
		$("#div_maint").html(result);
	    }});
	}

	function  kodi_refreshmusic() {
	    $.ajax({url: "../cgi-bin/kodi-refreshmusic.sh", success: function(result){
		$("#div_maint").html(result);
	    }});
	}

	function  kodi_stop_players() {
	    $.ajax({url: "../cgi-bin/kodi-stop-players.sh", success: function(result){
		$("#div_maint").html(result);
	    }});
	}

	function  kodi_audio_hdmi() {
	    $.ajax({url: "../cgi-bin/kodi-audio-hdmi.sh", success: function(result){
		$("#div_maint").html(result);
	    }});
	}

	function  kodi_audio_dac() {
	    $.ajax({url: "../cgi-bin/kodi-audio-dac.sh", success: function(result){
		$("#div_maint").html(result);
	    }});
	}
	</script>

	<style>
	    body {
		position: relative;
	    }
	    #div_main { padding-top:60px}
	</style>

    </head>

    <body data-spy="scroll" data-target=".navbar" data-offset=50>
      <!-- Static navbar -->
      <nav class="navbar navbar-inverse navbar-fixed-top">
	<div class="container-fluid">
	  <div class="navbar-header">
	    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
	      <span class="sr-only">Toggle navigation</span>
	      <span class="icon-bar"></span>
	      <span class="icon-bar"></span>
	      <span class="icon-bar"></span>
	    </button>
	    <a class="navbar-brand" href="#"> <img style="max-height=80px; margin-top: -7px" src=raspberry.png></a> <button type="button" class="btn btn-primary navbar-btn" onclick="svrinfo()">Refresh</button>
	  </div>

	  <div id="navbar" class="navbar-collapse collapse">
	    <ul class="nav navbar-nav">
	      <li class="dropdown">
		<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Live<span class="caret"></span></a>
		<ul class="dropdown-menu">
		    <li><div class="container-fluid">
		    <a href=live.html><button type="button" class="btn btn-info btn-xs navbar-btn">Live</button></a>
		    <button type="button" class="btn btn-info btn-xs navbar-btn" onclick="motioneye_toggle()">Toggle State</button>
		    </div></li>
		    <li><a href=https://192.168.0.151:33173 target="_blank">MotionEye</a> </li>
		    <li class="divider"></li>
		    <li><a href=http://192.168.0.207 target="_blank">dafang</a></li>
		    <li><a href=http://192.168.0.208 target="_blank">dafang1</a></li>
		    <li><a href=http://192.168.0.209 target="_blank">dafang2</a></li>
		    <li class="divider"></li>
		    <li><a href=http://192.168.0.151:8081 target="_blank">RPi3</a></li>
		    <li><a href=http://192.168.0.155:8081 target="_blank">RPi2</a></li>
		    <li><a href=http://192.168.0.156:8081 target="_blank">RPi1</a></li>
		    <li class="divider"></li>
		    <li><a href=http://192.168.0.157:8081 target="_blank">RPiX</a></li>
		    <li><a href=http://192.168.0.150:8081 target="_blank">RPi0</a></li> 
		</ul>
	      </li>
	      <li class="dropdown">
		<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Radio<span class="caret"></span></a>
		<ul class="dropdown-menu">
		    <li><div class="container-fluid">
		    <button type="button" onclick="radio_play()">&#9658</button> <button type="button" onclick="radio_stop()">&#9632</button></div></li>
		</ul>
	      </li>
	      <li class="dropdown">
		<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Kodi<span class="caret"></span></a>
		<ul class="dropdown-menu">
		    <li><div class="container-fluid">
		    <a href=http://192.168.0.151:9080><button type="button" class="btn btn-success btn-xs navbar-btn">Kodi</button></a>
		    <button type="button" class="btn btn-danger btn-xs navbar-btn" onclick="kodi_stop_players()">Stop Kodi players</button>
		    <button type="button" class="btn btn-info btn-xs navbar-btn" onclick="kodi_rescanmusic()">Musc: Rescan</button> <button type="button" class="btn btn-info btn-xs navbar-btn" onclick="kodi_refreshmusic()">Musc: Full Refresh</button>
		    <button type="button" class="btn btn-success btn-xs navbar-btn" onclick="kodi_audio_hdmi()">audio: HDMI</button> <button type="button" class="btn btn-success btn-xs navbar-btn" onclick="kodi_audio_dac()">audio: DAC</button></div></li>
		</ul>
	      </li>
	      <li class="dropdown">
		<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">DAAP<span class="caret"></span></a>
		<ul class="dropdown-menu">
		    <li><a href=http://192.168.0.151:3689 target="_blank">RPi3</a> </li>
		    <li><a href=http://192.168.0.155:3689 target="_blank">RPi2</a></li>
		    <li><a href=http://192.168.0.156:3689 target="_blank">RPi0</a></li> 
		</ul>
	      </li>
	    </ul>
	    <ul class="nav navbar-nav navbar-right" style="margin-right: 5px">
	     <li class="dropdown">
		<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Svcs<span class="caret"></span></a>
		<ul class="dropdown-menu">
		    <li><div class="container-fluid"><button type="button" class="btn btn-primary btn-xs navbar-btn" onclick="restartbluetooth()">Restart BT</button>
		    <button type="button" class="btn btn-success btn-xs navbar-btn" onclick="restartemu()">Restart EmuStation</button>
		    <button type="button" class="btn btn-danger btn-xs navbar-btn" onclick="restartkodi()">Restart Kodi</button>
		    <button type="button" class="btn btn-info btn-xs navbar-btn" onclick="restartforked_daapd()">Restart forked-daapd</button>
		    <button type="button" class="btn btn-warning btn-xs navbar-btn" onclick="reboot_dafang1()">Reboot dafang1</button>
		    <button type="button" class="btn btn-warning btn-xs navbar-btn" onclick="reboot_dafang2()">Reboot dafang2</button>
		    <button type="button" class="btn btn-warning btn-xs navbar-btn" onclick="reboot_dafang3()">Reboot dafang3</button>
		    //<button type="button" class="btn btn-danger btn-xs navbar-btn" onclick="foo()">foo</button>
		    </div></li>
		</ul>
	      </li>
		<li><div id="div_maint_bttns">
		    <button type="button" class="btn btn-danger navbar-btn" data-toggle="modal" data-target="#modal_rebootshutdown">Reboot/Shutdown</button>
	    </div></li>
	    <li><div id="div_maint_cancel_bttns"><button type="button" class="btn btn-warning navbar-btn" onclick="cancel()">Cancel Reboot/Shutdown</button> </div></li>
	    </ul>
	  </div><!--/.nav-collapse -->
	</div>
      </nav>

      <div id="div_main" class="container-fluid">
	  <div class="modal fade" id="modal_rebootshutdown" role="dialog">
	    <div class="modal-dialog modal-sm">
	      <div class="modal-content">
		<div class="modal-header">
		  <button type="button" class="close" data-dismiss="modal">&times;</button>
		  <h4 class="modal-title">WARNING</h4>
		</div>
		<div class="modal-body">
		    <p><b><strong>Confirm:</strong></b> proceed with bringing down system</p>
		</div>
		<div class="modal-footer">
		  <button type="button" class="btn btn-default" data-dismiss="modal">Abort</button>
		  <button type="button" class="btn btn-warning" data-dismiss="modal" onclick="reboot()">Reboot</button>
		  <button type="button" class="btn btn-danger"  data-dismiss="modal" onclick="shutdown()">Shutdown</button>
		</div>
	      </div>
	    </div>
	  </div>
	<! -- status update block -->
	<pre style="font-size:9px"><code><div id="div_maint"></div></code></pre>

	<pre style="overflow-x:scroll; font-size:9px; word-wrap:normal"><div id="div_svrinfo"></div></pre>
      </div>
    </body>

   <script src="bootstrap.min.js"></script>
</html>
